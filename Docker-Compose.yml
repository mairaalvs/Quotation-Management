version: "3.8"
services:
            
    mysql:
        hostname: mysql
        image: mysql:8
        container_name: mysql
        environment:
        	- MYSQL_ROOT_PASSWORD=root
            - MYSQL_DATABASE=bootdb
        ports:
            - "3306:3306"
            - "33060:33060"
        networks:
            - connection1
    
    stock-manager:
        image: adautomendes/stock-manager
        container_name: stock-manager
        ports:
        	- "8080:8080"
        environment:
        	- SERVER_HOST=stock-manager
	        - SERVER_PORT=8080
	        - MYSQL_HOST=mysql
	        - MYSQL_PORT=3306
	        - SPRING_PROFILES_ACTIVE=prod
        depends_on:
        	- mysql
        networks:
        	- app-network

//    quotemng:
//        hostname: quotemng
//        build: .
//        image: quotemanager
//        container_name: quotemng
//        environment:
//            - stockManagerUrl=stockmng
//            - quoteManagerUrl=quotemng
//            - databaseUrl=mysql
//            - SPRING_PROFILES_ACTIVE=prod
//        ports:
//            - "8081:8081"
//        networks:
//            - connection1
//        depends_on:
//            - mysql
//            - stockmng
            

networks:
    connection1:
        driver: bridge